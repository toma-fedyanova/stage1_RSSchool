/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./style.css":
/*!*******************!*\
  !*** ./style.css ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack:///./style.css?");

/***/ }),

/***/ "./api/engine.ts":
/*!***********************!*\
  !*** ./api/engine.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EngineApi: () => (/* binding */ EngineApi)\n/* harmony export */ });\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _EngineApi_url;\nclass EngineApi {\n    constructor() {\n        _EngineApi_url.set(this, void 0);\n        __classPrivateFieldSet(this, _EngineApi_url, 'http://127.0.0.1:3000', \"f\");\n    }\n    async infoDistance(id, status) {\n        const data = await fetch(`${__classPrivateFieldGet(this, _EngineApi_url, \"f\")}/engine/?id=${id}&status=${status}`, { method: 'PATCH' });\n        const res = await data.json();\n        return res;\n    }\n    async infoDrive(id) {\n        const data = await fetch(`${__classPrivateFieldGet(this, _EngineApi_url, \"f\")}/engine/?id=${id}&status=drive`, { method: 'PATCH' });\n        const res = await data.json();\n        return res.satus;\n    }\n}\n_EngineApi_url = new WeakMap();\n\n\n//# sourceURL=webpack:///./api/engine.ts?");

/***/ }),

/***/ "./api/garage.ts":
/*!***********************!*\
  !*** ./api/garage.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Api: () => (/* binding */ Api)\n/* harmony export */ });\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Api_url;\nclass Api {\n    constructor() {\n        _Api_url.set(this, void 0);\n        __classPrivateFieldSet(this, _Api_url, 'http://127.0.0.1:3000', \"f\");\n    }\n    async getCars(page = 1, limit = 7) {\n        const data = await fetch(`${__classPrivateFieldGet(this, _Api_url, \"f\")}/garage/?_page=${page}&_limit=${limit}`);\n        const res = data.json();\n        return res;\n    }\n    async getTotalCars() {\n        const data = await fetch(`${__classPrivateFieldGet(this, _Api_url, \"f\")}/garage`);\n        const res = await data.json();\n        // const number = res.headers.get('X-Total-Count');\n        // return number;\n        return res;\n    }\n    async getCar(id) {\n        const data = await fetch(`${__classPrivateFieldGet(this, _Api_url, \"f\")}/garage/${id}`);\n        const res = data.json();\n        return res;\n    }\n    async postCar(name, color) {\n        const config = {\n            name: name,\n            color: color\n        };\n        const data = await fetch(`${__classPrivateFieldGet(this, _Api_url, \"f\")}/garage/`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(config)\n        });\n        const res = data.json();\n        return res;\n    }\n    async putCar(id, name, color) {\n        const config = {\n            name: name,\n            color: color\n        };\n        const data = await fetch(`${__classPrivateFieldGet(this, _Api_url, \"f\")}/garage/${id}`, {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(config)\n        });\n        const res = data.json();\n        return res;\n    }\n    async deleteCar(id) {\n        const data = await fetch(`${__classPrivateFieldGet(this, _Api_url, \"f\")}/garage/${id}`, { method: 'DELETE' });\n        const res = data.json();\n        return res;\n    }\n}\n_Api_url = new WeakMap();\n\n\n//# sourceURL=webpack:///./api/garage.ts?");

/***/ }),

/***/ "./api/winners.ts":
/*!************************!*\
  !*** ./api/winners.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WinnersApi: () => (/* binding */ WinnersApi)\n/* harmony export */ });\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _WinnersApi_url;\nclass WinnersApi {\n    constructor() {\n        _WinnersApi_url.set(this, void 0);\n        __classPrivateFieldSet(this, _WinnersApi_url, 'http://127.0.0.1:3000', \"f\");\n    }\n    async postWinner(id, wins, time) {\n        const config = {\n            id: id,\n            wins: wins,\n            time: time\n        };\n        const data = await fetch(`${__classPrivateFieldGet(this, _WinnersApi_url, \"f\")}/winners`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(config),\n        });\n        const res = await data.json();\n        return res;\n    }\n    async putWinner(id, wins, time) {\n        const config = {\n            wins: wins,\n            time: time\n        };\n        const data = await fetch(`${__classPrivateFieldGet(this, _WinnersApi_url, \"f\")}/winners/${id}`, {\n            method: 'PUT',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(config),\n        });\n        const res = await data.json();\n        return res;\n    }\n    async deleteWinner(id) {\n        const data = await fetch(`${__classPrivateFieldGet(this, _WinnersApi_url, \"f\")}/winners/${id}`, { method: 'DELETE' });\n        const res = await data.json();\n        return res;\n    }\n    async getWinner(id) {\n        const data = await fetch(`${__classPrivateFieldGet(this, _WinnersApi_url, \"f\")}/winners/${id}`, { method: 'GET' });\n        const res = await data.json();\n        return res;\n        // if (res.status === 200) return res; \n        // else return null;\n    }\n    async getAllWinner() {\n        const data = await fetch(`${__classPrivateFieldGet(this, _WinnersApi_url, \"f\")}/winners`, { method: 'GET' });\n        const res = await data.json();\n        return res;\n    }\n}\n_WinnersApi_url = new WeakMap();\n\n\n//# sourceURL=webpack:///./api/winners.ts?");

/***/ }),

/***/ "./component/animation.ts":
/*!********************************!*\
  !*** ./component/animation.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnimationRace: () => (/* binding */ AnimationRace)\n/* harmony export */ });\n/* harmony import */ var _api_engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/engine */ \"./api/engine.ts\");\n/* harmony import */ var _api_winners__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/winners */ \"./api/winners.ts\");\n/* harmony import */ var _api_garage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/garage */ \"./api/garage.ts\");\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _AnimationRace_carWidth;\n\n\n\nclass AnimationRace {\n    constructor() {\n        _AnimationRace_carWidth.set(this, void 0);\n        this.engineApi = new _api_engine__WEBPACK_IMPORTED_MODULE_0__.EngineApi();\n        this.winnersApi = new _api_winners__WEBPACK_IMPORTED_MODULE_1__.WinnersApi();\n        this.api = new _api_garage__WEBPACK_IMPORTED_MODULE_2__.Api();\n        __classPrivateFieldSet(this, _AnimationRace_carWidth, 85, \"f\"); //from svg parametrs\n    }\n    getMessage(parent) {\n        const span = document.createElement('span');\n        span.classList.add('message');\n        span.textContent = ' It`s engine was broken down';\n        if (parent)\n            parent.insertAdjacentElement('beforeend', span);\n    }\n    getMessageWin(parent) {\n        const name = parent?.querySelector('span')?.textContent;\n        const span = document.createElement('span');\n        span.classList.add('message');\n        span.textContent = `🎉 ${name} won!! 🎉🎉🎉`;\n        if (parent)\n            parent.insertAdjacentElement('beforeend', span);\n    }\n    async startMove(element) {\n        element.classList.add('selected');\n        element.previousElementSibling?.classList.remove('selected');\n        const div = element.parentElement?.children;\n        if (div)\n            [...div].forEach(btn => btn.disabled = true);\n        const li = element.closest('li.garage_car');\n        let roadLength;\n        if (li)\n            roadLength = parseInt(window.getComputedStyle(li).width) - __classPrivateFieldGet(this, _AnimationRace_carWidth, \"f\");\n        const car = li?.querySelector('svg');\n        const id = Number(li?.id);\n        let requestId;\n        let carLocate;\n        let lastDistance;\n        const step = () => {\n            carLocate += lastDistance; //сколько прибавить px при смене экрана\n            if (car)\n                car.style.transform = `translateX(${carLocate}px)`;\n            if (carLocate < roadLength) {\n                requestId = window.requestAnimationFrame(step);\n            }\n        };\n        const timePromise = await this.engineApi.infoDistance(id, 'started').then((res) => {\n            const duration = res.distance / res.velocity; //(расстояние / скорость) = время\n            const durationMin = (duration / 1000) * 60; // при обновлении экрана 60 кадров в сек\n            if (car)\n                carLocate = car.getBoundingClientRect().x;\n            if (car)\n                lastDistance = (roadLength - car.getBoundingClientRect().x) / durationMin;\n            step();\n            return duration;\n        });\n        return this.engineApi.infoDrive(id)\n            .then(() => {\n            if (div)\n                [...div].map(btn => btn.disabled = false);\n            return [id, timePromise];\n        })\n            .catch(() => {\n            window.cancelAnimationFrame(requestId);\n            this.getMessage(li?.firstElementChild);\n            if (div)\n                [...div].map(btn => btn.disabled = false);\n            throw new Error(`Code 500. Car has been stopped suddenly. It's engine was broken down.`);\n        });\n    }\n    returnStart(el) {\n        el.classList.add('selected');\n        el.nextElementSibling?.classList.remove('selected');\n        const li = el.closest('li');\n        const span = li?.querySelector('.message');\n        if (span)\n            span.textContent = '';\n        const car = li?.querySelector('svg');\n        if (car)\n            car.style.transform = `translateX(0px)`;\n    }\n    startRace() {\n        const buttons = document.querySelectorAll('.btn_B');\n        const header = document.querySelector('.section__config');\n        const div = document.createElement('div');\n        div.classList.add('absolute');\n        div.style.backgroundColor = 'black';\n        header?.prepend(div);\n        Promise.any((Array.from(buttons)).map(btn => this.startMove(btn))).then(res => {\n            this.sendWinnerServer(res);\n            return res;\n        }).then((res) => {\n            const num = String(res[0]);\n            const li = document.getElementById(num);\n            this.getMessageWin(li?.firstElementChild);\n        })\n            .then(() => {\n            setTimeout(() => {\n                div.classList.remove('absolute');\n            }, 4000);\n        }).catch(er => console.log(er));\n    }\n    stopRace() {\n        const buttons = document.querySelectorAll('.btn_A');\n        Promise.all((Array.from(buttons)).map(btn => this.returnStart(btn))).then(() => {\n            const spans = document.querySelectorAll('.message');\n            spans.forEach(span => span.remove());\n        }).catch(er => console.log(er));\n    }\n    async sendWinnerServer(res) {\n        const id = res[0];\n        const time = Number((res[1] / 1000).toFixed(2));\n        console.log(time);\n        await this.winnersApi.postWinner(id, 1, time).catch(async () => {\n            const winners = await this.winnersApi.getWinner(id);\n            const timeBest = winners.time;\n            console.log(timeBest + 'timebest');\n            if (timeBest > time)\n                winners.time = time;\n            winners.wins = winners.wins + 1;\n            await this.winnersApi.putWinner(id, winners.wins, winners.time);\n        });\n    }\n}\n_AnimationRace_carWidth = new WeakMap();\n\n\n//# sourceURL=webpack:///./component/animation.ts?");

/***/ }),

/***/ "./component/startRace.ts":
/*!********************************!*\
  !*** ./component/startRace.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StartRace: () => (/* binding */ StartRace)\n/* harmony export */ });\n/* harmony import */ var _pages_page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../pages/page */ \"./pages/page.ts\");\n/* harmony import */ var _api_garage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/garage */ \"./api/garage.ts\");\n/* harmony import */ var _api_engine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/engine */ \"./api/engine.ts\");\n/* harmony import */ var _component_animation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../component/animation */ \"./component/animation.ts\");\n\n\n\n\nclass StartRace {\n    constructor() {\n        this.renderPages = new _pages_page__WEBPACK_IMPORTED_MODULE_0__.RenderPages();\n        this.api = new _api_garage__WEBPACK_IMPORTED_MODULE_1__.Api();\n        this.apiEngine = new _api_engine__WEBPACK_IMPORTED_MODULE_2__.EngineApi();\n        this.animationRace = new _component_animation__WEBPACK_IMPORTED_MODULE_3__.AnimationRace();\n        this.header = document.getElementById('header');\n        this.page = 1;\n    }\n    start() {\n        this.renderButtonsHeader();\n        this.renderPages.garage();\n        this.buttonGarag();\n        this.buttonWinner();\n        this.startDriveButtons();\n        this.buttonCreateCar();\n        this.buttonChangePagesGarage();\n    }\n    renderButtonsHeader() {\n        this.renderPages.getButtonsHeader();\n    }\n    renderCars() {\n        const ul = document.getElementById('ul_cars');\n        this.api.getCars(this.page).then(arr => {\n            for (const car of arr) {\n                const carExample = this.renderPages.createCar(car.name, car.color, car.id);\n                ul.insertAdjacentElement(\"beforeend\", carExample);\n            }\n        });\n    }\n    buttonGarag() {\n        const buttonGarage = document.getElementById('garage');\n        buttonGarage?.addEventListener('click', () => {\n            this.renderPages.removeClass('garage', 'selected', 'winner');\n            buttonGarage.classList.add('selected');\n            this.renderPages.garage();\n            this.renderCars();\n            const span = document.getElementById('page_count');\n            if (span)\n                span.textContent = '#1';\n            console.log(this.apiEngine.infoDistance(1, 'started'));\n            console.log(this.apiEngine.infoDrive(1));\n            console.log(this.apiEngine.infoDistance(1, 'stopped'));\n        });\n    }\n    buttonWinner() {\n        const buttonWinner = document.getElementById('winner');\n        buttonWinner?.addEventListener('click', () => {\n            this.renderPages.removeClass('garage', 'selected', 'winner');\n            buttonWinner.classList.add('selected');\n            this.renderPages.winner();\n        });\n    }\n    startDriveButtons() {\n        document.body.addEventListener('click', async (event) => {\n            const el = event.target;\n            if (el.getAttribute('data-name') === 'btn_B') {\n                this.animationRace.startMove(el)\n                    .catch(() => console.log(`Code 500.Car has been stopped suddenly. It's engine was broken down`));\n            }\n            else if (el.getAttribute('data-name') === 'btn_A') {\n                this.animationRace.returnStart(el);\n            }\n            else if (el.closest('#btn_race')) {\n                if (el.getAttribute('data-bool') === 'false') {\n                    this.animationRace.startRace();\n                    el.setAttribute('data-bool', 'true');\n                }\n                else\n                    alert('Верните машины на старт с помощью кнопки \"RESET\"!');\n            }\n            else if (el.closest('#btn_reset')) {\n                this.animationRace.stopRace();\n                const btn = document.getElementById('btn_race');\n                btn?.setAttribute('data-bool', 'false');\n            }\n        });\n    }\n    buttonCreateCar() {\n        document.body.addEventListener('click', async (event) => {\n            const el = event.target;\n            if (el.closest('#btn_create')) {\n                const colorInput = el.previousElementSibling;\n                const color = colorInput.value;\n                const nameInput = colorInput.previousElementSibling;\n                const name = (nameInput.value.length > 0) ? nameInput.value : 'машина будущего';\n                await this.api.postCar(name, color).then(() => this.renderPages.getcountCars()).then(() => {\n                    this.renderPages.garage();\n                    this.renderCars();\n                });\n            }\n            if (el.closest('.btn_remove')) {\n                const li = el.closest('li');\n                if (li)\n                    await this.api.deleteCar(li?.id).then(() => li?.remove());\n            }\n        });\n    }\n    buttonChangePagesGarage() {\n        document.body.addEventListener('click', async (event) => {\n            const el = event.target;\n            const count = this.renderPages.getPagesgarage();\n            const span = document.getElementById('page_count');\n            const pageActual = Number(span?.textContent?.slice(1));\n            if (el.closest('#btn_next_garage')) {\n                const num = (pageActual < count) ? (pageActual + 1) : count;\n                this.page = num;\n                this.renderPages.garage();\n                this.renderCars();\n                const span = document.getElementById('page_count');\n                if (span)\n                    span.textContent = `#${this.page}`;\n            }\n            else if (el.closest('#btn_previous_garage')) {\n                const num = (pageActual > 1) ? (pageActual - 1) : 1;\n                this.page = num;\n                this.renderPages.garage();\n                this.renderCars();\n                const span = document.getElementById('page_count');\n                if (span)\n                    span.textContent = `#${this.page}`;\n            }\n        });\n    }\n}\n\n\n//# sourceURL=webpack:///./component/startRace.ts?");

/***/ }),

/***/ "./index.ts":
/*!******************!*\
  !*** ./index.ts ***!
  \******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./style.css */ \"./style.css\");\n/* harmony import */ var _component_startRace__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./component/startRace */ \"./component/startRace.ts\");\n\n\nfunction startGame() {\n    const start = new _component_startRace__WEBPACK_IMPORTED_MODULE_1__.StartRace();\n    start.start();\n}\nstartGame();\n\n\n//# sourceURL=webpack:///./index.ts?");

/***/ }),

/***/ "./pages/page.ts":
/*!***********************!*\
  !*** ./pages/page.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RenderPages: () => (/* binding */ RenderPages)\n/* harmony export */ });\n/* harmony import */ var _api_garage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/garage */ \"./api/garage.ts\");\n/* harmony import */ var _api_winners__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/winners */ \"./api/winners.ts\");\n\n\nclass RenderPages {\n    constructor() {\n        this.api = new _api_garage__WEBPACK_IMPORTED_MODULE_0__.Api();\n        this.winnersApi = new _api_winners__WEBPACK_IMPORTED_MODULE_1__.WinnersApi();\n        this.countCars = 4;\n        this.countWinners = 0;\n    }\n    async getcountCars() {\n        await this.api.getTotalCars().then(res => this.countCars = res.length);\n    }\n    async getcountWinners() {\n        await this.winnersApi.getAllWinner().then(res => this.countWinners = res.length);\n    }\n    getPagesgarage() {\n        const num = Math.ceil(this.countCars / 7);\n        return num;\n    }\n    createElement(value, classNam, id, text) {\n        const element = document.createElement(value);\n        if (classNam)\n            element.classList.add(classNam);\n        if (id)\n            element.id = id;\n        if (text)\n            element.textContent = text;\n        return element;\n    }\n    createInput(classNam, typeName, placeholder, val) {\n        const input = document.createElement('input');\n        if (classNam)\n            input.classList.add(classNam);\n        if (typeName)\n            input.type = typeName;\n        if (placeholder)\n            input.placeholder = placeholder;\n        if (val)\n            input.value = val;\n        return input;\n    }\n    createButtons(classNam, id, text, parent, dataName) {\n        for (let i = 0; i < text.length; i += 1) {\n            const btn = document.createElement('button');\n            if (classNam)\n                btn.classList.add(classNam);\n            if (id.length)\n                btn.id = id[i];\n            if (dataName)\n                btn.setAttribute('data-name', dataName[i]);\n            btn.textContent = text[i];\n            parent.append(btn);\n        }\n    }\n    removeClass(id1, item, id2) {\n        const element1 = document.getElementById(id1);\n        element1?.classList.remove(item);\n        if (id2) {\n            const element2 = document.getElementById(id2);\n            element2?.classList.remove(item);\n        }\n    }\n    getColoredCar(color) {\n        if (!color || color.length !== 7 || color === '#000000')\n            color = '#ffffff';\n        const car = `\r\n    <?xml version=\"1.0\" standalone=\"no\"?>\r\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 20010904//EN\" \"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd\">\r\n<svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"85px\" height=\"56px\" viewBox=\"0 0 1280.000000 100.000000\" preserveAspectRatio=\"xMidYMid meet\">\r\n<metadata> Created by potrace 1.15, written by Peter Selinger 2001-2017 </metadata>\r\n<g transform=\"translate(0.000000,640.000000) scale(0.100000,-0.100000)\" fill=${color} stroke=\"none\">\r\n<path d=\"M4880 5759 c-586 -51 -1428 -339 -2345 -803 l-260 -131 -140 1 c-169 1 -245 18 -565 124 -359 119 -514 150 -653 131 -136 -19 -222 -65 -319 -170\r\n-74 -79 -106 -149 -120 -259 -27 -223 33 -771 172 -1557 51 -286 98 -526 104 -532 4 -5 113 8 201 23 29 5 33 1 80 -73 64 -101 217 -254 326 -326 170 -112\r\n382 -195 585 -228 43 -7 151 -13 239 -12 132 0 181 4 281 26 290 61 526 188 711 380 114 118 195 246 248 388 l17 46 116 6 c591 32 2893 33 3907 3 925 -28\r\n1722 -59 1729 -68 2 -1 26 -48 55 -103 109 -213 277 -384 501 -508 222 -123 519 -184 766 -159 200 21 331 59 500 144 189 94 366 250 477 420 l52 81 115\r\n-7 c159 -9 803 -54 870 -61 l56 -6 49 67 c26 36 60 96 74 133 24 61 26 77 25 231 0 126 -4 181 -17 230 -76 281 -185 492 -333 650 -327 347 -999 711 -1569\r\n851 -149 37 -194 44 -430 69 -646 69 -1333 124 -2495 200 -388 26 -650 102 -1310 380 -451 190 -632 259 -844 319 -303 87 -605 122 -856 100z m4803 -1216\r\nc-7 -2 -19 -2 -25 0 -7 3 -2 5 12 5 14 0 19 -2 13 -5z m115 -10 c-10 -2 -28\r\n-2 -40 0 -13 2 -5 4 17 4 22 1 32 -1 23 -4z m110 -10 c-10 -2 -28 -2 -40 0\r\n-13 2 -5 4 17 4 22 1 32 -1 23 -4z m188 -13 c43 -5 169 -19 279 -30 236 -25\r\n348 -46 525 -101 382 -117 812 -335 1090 -552 100 -79 228 -206 273 -271 129\r\n-190 216 -461 204 -640 -3 -43 -10 -83 -16 -89 -7 -7 -133 -1 -403 18 -216 15\r\n-394 28 -395 29 -2 1 4 37 12 80 21 111 19 277 -5 397 -89 436 -404 776 -850\r\n917 -263 83 -558 84 -818 1 -429 -137 -733 -448 -843 -864 -15 -58 -23 -123\r\n-26 -239 l-6 -159 -91 7 c-50 3 -345 15 -656 26 -1492 52 -2757 69 -3808 51\r\n-405 -7 -812 -15 -904 -18 l-168 -5 0 41 c0 61 -18 175 -42 260 -46 170 -150\r\n344 -286 480 -103 103 -184 163 -324 237 -109 57 -123 69 -36 31 42 -18 62\r\n-21 98 -16 25 4 83 8 129 8 45 1 147 5 225 10 77 6 238 15 356 21 118 6 296\r\n15 395 20 99 5 266 14 370 20 105 5 276 14 380 20 105 5 276 14 380 20 105 5\r\n278 14 385 20 107 6 278 15 380 20 236 12 512 27 760 40 107 6 279 15 383 20\r\n103 6 273 15 377 20 105 6 276 15 380 20 105 6 276 15 380 20 105 6 277 15\r\n383 20 105 6 273 15 372 20 99 5 275 14 390 20 116 6 280 15 365 20 85 5 236\r\n13 335 17 99 4 173 8 165 10 -9 2 -72 10 -140 17 -69 8 -104 14 -79 15 25 0\r\n81 -3 125 -9z m-8611 -433 c-190 -103 -333 -231 -444 -394 -51 -77 -116 -209\r\n-138 -283 l-17 -55 -23 140 c-33 201 -75 535 -69 548 2 7 5 0 5 -15 1 -33 -7\r\n-32 163 -18 68 5 186 11 263 14 l140 5 80 45 c44 25 84 46 90 46 5 0 -17 -15 -50 -33z\"/>\r\n</g> </svg>\r\n  `;\n        return car;\n    }\n    getButtonsHeader() {\n        const header = this.createElement('header', 'header', 'header');\n        document.body.prepend(header);\n        this.createButtons('button__bordered', ['garage', 'winner'], ['to garage', 'to winners'], header);\n        const firstButton = header.firstElementChild;\n        firstButton?.classList.add('selected');\n        const section = this.createElement('section', 'section', 'section_main');\n        header.insertAdjacentElement(\"afterend\", section);\n    }\n    createBlockConfig() {\n        const block = this.createElement('section', 'section__config', 'section__config');\n        const buttonText = ['create', 'update'];\n        for (let i = 0; i < 2; i += 1) {\n            const div = this.createElement('div', 'div_config');\n            const inputText = this.createInput('car_name', 'text', 'Enter car name');\n            const inputColor = this.createInput('car_color', 'color', '', '#ff1507');\n            const button = this.createElement('button', 'button_colored', `btn_${buttonText[i]}`, buttonText[i]);\n            div.append(inputText);\n            div.append(inputColor);\n            div.append(button);\n            block.append(div);\n        }\n        const divButton = this.createElement('div', 'div_buttons');\n        this.createButtons('button_colored', ['btn_race', 'btn_reset', 'btn_generate'], ['race', 'reset', 'generate cars'], divButton);\n        block.append(divButton);\n        return block;\n    }\n    createCar(name, color, id) {\n        const car = this.createElement('li', 'garage_car', String(id));\n        const div = this.createElement('div', 'car_buttons');\n        this.createButtons('button_colored', ['', ''], ['select', 'remove'], div);\n        const button = div.firstElementChild;\n        button?.classList.add('btn_select');\n        const button2 = button?.nextElementSibling;\n        button2?.classList.add('btn_remove');\n        const span = this.createElement('span', 'car_name', '', `${name}`);\n        div.append(span);\n        const div1 = this.createElement('div', 'car_buttons');\n        div1.classList.add('single_race');\n        this.createButtons('button__bordered', ['', ''], ['A', 'B'], div1, ['btn_A', 'btn_B']);\n        div1.firstElementChild?.classList.add('selected');\n        div1.lastElementChild?.classList.add('btn_B');\n        div1.firstElementChild?.classList.add('btn_A');\n        car.append(div);\n        car.append(div1);\n        car.insertAdjacentHTML('beforeend', this.getColoredCar(color));\n        car.append(this.createElement('p', 'flag', 'flag', '🏁'));\n        return car;\n    }\n    createGarage(countOfCars) {\n        const garage = this.createElement('section', 'garage', 'garageBlock');\n        const title = this.createElement('h1', 'garage_title', 'garage_title', 'Garage ');\n        const span = this.createElement('span', 'cars_count', 'cars_count', `${countOfCars}`);\n        title.insertAdjacentElement(\"beforeend\", span);\n        const text = this.createElement('h3', 'garage_page', 'garage_page', 'Page ');\n        const span1 = this.createElement('span', 'page_count', 'page_count');\n        text.insertAdjacentElement(\"beforeend\", span1);\n        garage.insertAdjacentElement(\"beforeend\", title);\n        garage.insertAdjacentElement(\"beforeend\", text);\n        const ul = this.createElement('ul', 'ul_cars', 'ul_cars');\n        garage.append(ul);\n        const div = this.createElement('div', 'buttons_page');\n        this.createButtons('button_colored', ['btn_previous_garage', 'btn_next_garage'], ['previous', 'next'], div);\n        garage.append(div);\n        return garage;\n    }\n    clearSection() {\n        const section = document.getElementById('section_main');\n        section.innerHTML = '';\n    }\n    winner() {\n        this.clearSection();\n        const titleTable = ['Number', 'Car', 'Name', 'Wins', 'Best time(seconds)'];\n        const section = document.getElementById('section_main');\n        const title = this.createElement('h1', 'title_winners', 'title_winners', 'Winners ');\n        const span = document.createElement('span');\n        this.getcountWinners();\n        span.textContent = String(this.countWinners); //todo coun winners\n        title.append(span);\n        section.append(title);\n        const text = this.createElement('h3', 'winners_page', 'winners_page', 'Page #1');\n        section.append(text);\n        const table = this.createElement('table', 'table', 'table');\n        const thead = this.createElement('thead', 'thead', 'thead');\n        for (let k = 0; k < 5; k++) {\n            const td = this.createElement('td', 'td_head');\n            td.textContent = titleTable[k];\n            thead.append(td);\n        }\n        table.append(thead);\n        for (let i = 0; i < 10; i += 1) {\n            const tr = this.createElement('tr', 'tr');\n            for (let j = 0; j < 5; j++) {\n                const td = this.createElement('td', 'td');\n                tr.append(td);\n            }\n            table.append(tr);\n        }\n        section.append(table);\n        const div = this.createElement('div', 'winners_list', 'winners_list');\n        this.createButtons('button_colored', ['btn_previous', 'btn_next'], ['previous', 'next'], div);\n        section.append(div);\n    }\n    garage() {\n        this.clearSection();\n        const section = document.getElementById('section_main');\n        section.prepend(this.createBlockConfig());\n        document.getElementById('btn_race')?.setAttribute('data-bool', 'false');\n        this.getcountCars(); //examine\n        section.append(this.createGarage(String(this.countCars))); //todo count of car\n    }\n}\n\n\n//# sourceURL=webpack:///./pages/page.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./index.ts");
/******/ 	
/******/ })()
;